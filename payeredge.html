<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>RevSight — Pricing Card</title>

  <style>
    :root{
      --bg:#0b1321; --card:#0f1a2b; --card-2:#101d31; --fg:#e8f0ff; --muted:#9fb0c9;
      --line:#24354e; --accent:#7bb7ff; --ok:#7be0c3; --warn:#ffd166;
      --shadow:0 18px 40px rgba(0,0,0,.35);
      --pad-1:10px; --pad-2:14px; --pad-3:18px; --radius:22px;
      --num: clamp(40px, 7vw, 76px);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:linear-gradient(180deg,#0a1220,#0b1321 60%,#09101a);
      color:var(--fg); font:15px/1.45 Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .wrap{
      max-width:980px; margin:28px auto; padding:0 16px;
    }
    .card{
      background:radial-gradient(1200px 600px at 70% -200px,rgba(114,168,255,.14),transparent 60%) , var(--card);
      border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius); box-shadow:var(--shadow);
      overflow:hidden;
    }

    /* Header */
    .head{
      display:grid; grid-template-columns:1fr auto; gap:16px;
      padding:22px clamp(16px, 3.5vw, 28px) 10px;
      align-items:center;
    }
    .tier-stars{ color:var(--warn); font-size:20px; letter-spacing:2px; }
    .title{ margin-top:6px; }
    .title h1{ font-size:20px; margin:0 0 2px 0; }
    .title .sub{ font-size:13px; color:var(--muted); }
    .price{
      text-align:right;
    }
    .kicker{ font-size:12px; color:var(--muted); margin-top:6px; }
    .profit{ color:var(--ok); font-weight:700; }

    /* Flip number */
    .flip{
      display:inline-grid; grid-auto-flow:column; gap:2px; align-items:end;
      font-weight:800; font-size:var(--num); line-height:1; letter-spacing:1px;
      font-variant-numeric:tabular-nums;
    }
    .flip .d{
      position:relative; overflow:hidden; display:inline-block; width:ch; min-width:0.65em;
    }
    .flip .d > span{
      display:block; transform:translateY(0);
    }
    .flip.animate .d > span{
      animation:flip 420ms ease-in-out;
    }
    @keyframes flip{
      0%{ transform:translateY(0) }
      49%{ transform:translateY(100%) }
      50%{ transform:translateY(-100%) }
      100%{ transform:translateY(0) }
    }
    @media (prefers-reduced-motion:reduce){
      .flip.animate .d > span{ animation:none }
    }

    /* Table (gridless, airy) */
    .section{
      padding:8px clamp(16px, 3.5vw, 28px) 18px;
    }
    .section .label{
      display:flex; align-items:center; gap:10px; color:var(--muted); font-weight:600;
      margin:8px 0 10px; user-select:none; cursor:default;
    }
    .hr{
      height:1px; background:var(--line); margin:6px 0 8px;
      box-shadow:0 1px 0 rgba(0,0,0,.25) inset;
    }
    .tbl{
      width:100%;
      border-collapse:separate; border-spacing:0 6px; /* space between rows */
    }
    .tbl th{
      text-align:left; color:var(--muted); font-size:12px; font-weight:600;
      padding:8px 10px 6px; white-space:nowrap;
    }
    .tbl td{
      padding:10px; background:var(--card-2);
      border-radius:12px; border:1px solid rgba(255,255,255,.04);
      vertical-align:middle;
    }
    .tbl .item{ font-weight:600 }
    .tbl .code{ font-weight:700; color:#cfe1ff }
    .tbl .num{ white-space:nowrap; font-variant-numeric:tabular-nums; }
    .tbl .muted{ color:var(--muted) }

    /* Subtle row separation between groups without grid bars */
    .group-gap{ height:10px }

    /* Totals row */
    .totals td{
      background:linear-gradient(180deg,rgba(123,224,195,.08),rgba(123,224,195,.03));
      border-color:rgba(123,224,195,.22);
      font-weight:800;
    }

    /* Column sizing & wrapping */
    .col-item{ width:42% }
    .col-code{ width:13% }
    .col-copay,.col-hold,.col-fee{ width:15% }
    .code{ white-space:normal } /* allow NA+NJ without truncation */
    .item{ white-space:normal }
    .num{ text-align:right }

    /* Mobile stack tweaks */
    @media (max-width:720px){
      .head{ grid-template-columns:1fr }
      .price{ text-align:left }
      .tbl th{ display:none }
      .tbl td{
        display:grid; grid-template-columns: 1fr auto; gap:10px;
        padding:12px;
      }
      .tbl td[data-h="Item"]{ grid-template-columns: 1fr }
      .tbl .num{ justify-self:end }
      .col-item,.col-code,.col-copay,.col-hold,.col-fee{ width:auto }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="pricingCard">
      <!-- Header -->
      <div class="head">
        <div>
          <div class="tier-stars">★ ★ ★</div>
          <div class="title">
            <h1>Progressive</h1>
            <div class="sub">Hi-Index <strong>1.70+</strong></div>
          </div>
        </div>
        <div class="price">
          <div id="patientCopay" class="flip" aria-label="Patient Copay">$<span class="d"><span>3</span></span><span class="d"><span>8</span></span><span class="d"><span>5</span></span><span class="d"><span>.</span></span><span class="d"><span>0</span></span><span class="d"><span>0</span></span></div>
          <div class="kicker">Patient Copay</div>
          <div class="kicker">Service Fee (Practice Profit): <span id="profit" class="profit">$161.00</span></div>
        </div>
      </div>

      <!-- Main Line -->
      <div class="section">
        <table class="tbl" role="table" aria-label="Pricing breakdown">
          <thead>
            <tr>
              <th class="col-item">Item</th>
              <th class="col-code">Code</th>
              <th class="col-copay">Copay</th>
              <th class="col-hold">Holdback</th>
              <th class="col-fee">Service Fee</th>
            </tr>
          </thead>
          <tbody id="rows">
            <tr>
              <td class="item col-item" data-h="Item">Progressive Hi-Index 1.70+</td>
              <td class="code col-code" data-h="Code">NA+NJ</td>
              <td class="num col-copay" data-h="Copay"><strong id="mainCopay">$300.00</strong></td>
              <td class="num col-hold" data-h="Holdback"><strong id="mainHold">$172.00</strong></td>
              <td class="num col-fee" data-h="Service Fee"><strong id="mainFee">$128.00</strong></td>
            </tr>

            <tr><td class="group-gap" colspan="5" aria-hidden="true"></td></tr>

            <!-- Breakdown header -->
            <tr>
              <td class="muted" colspan="5" style="padding:6px 10px 4px;background:none;border:none">
                ▼ Breakdown for NA+NJ
              </td>
            </tr>

            <!-- NA row -->
            <tr>
              <td class="item col-item" data-h="Item">Progressive N – Plastic</td>
              <td class="code col-code" data-h="Code">NA</td>
              <td class="num col-copay" data-h="Copay">$175.00</td>
              <td class="num col-hold" data-h="Holdback">$95.00</td>
              <td class="num col-fee" data-h="Service Fee">$80.00</td>
            </tr>

            <!-- NJ row -->
            <tr>
              <td class="item col-item" data-h="Item">High-Index 1.70 and Above (add-on)</td>
              <td class="code col-code" data-h="Code">NJ</td>
              <td class="num col-copay" data-h="Copay">$125.00</td>
              <td class="num col-hold" data-h="Holdback">$77.00</td>
              <td class="num col-fee" data-h="Service Fee">$48.00</td>
            </tr>

            <!-- AR row -->
            <tr>
              <td class="item col-item" data-h="Item">Anti-reflective Coating D</td>
              <td class="code col-code" data-h="Code">QV</td>
              <td class="num col-copay" data-h="Copay"><strong>$85.00</strong></td>
              <td class="num col-hold" data-h="Holdback"><strong>$52.00</strong></td>
              <td class="num col-fee" data-h="Service Fee"><strong>$33.00</strong></td>
            </tr>

            <!-- Totals -->
            <tr class="totals">
              <td class="item col-item" data-h="Item"><strong>Totals</strong></td>
              <td class="code col-code" data-h="Code"> </td>
              <td class="num col-copay" data-h="Copay"><strong id="totCopay">$385.00</strong></td>
              <td class="num col-hold" data-h="Holdback"><strong id="totHold">$224.00</strong></td>
              <td class="num col-fee" data-h="Service Fee"><strong id="totFee">$161.00</strong></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Demo buttons (safe to remove). They show the flip animation on change. -->
    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:14px;opacity:.8">
      <button id="btnRandom" style="background:#16263f;color:#cfe1ff;border:1px solid #2a3d5b;border-radius:12px;padding:10px 14px;cursor:pointer">Demo: Randomize Numbers</button>
      <button id="btnReset"  style="background:#16263f;color:#cfe1ff;border:1px solid #2a3d5b;border-radius:12px;padding:10px 14px;cursor:pointer">Reset</button>
    </div>
  </div>

  <script>
    /* ===== Flip number utility =====
       Call setFlipValue(el, "$385.00") to update with animation.
       Attach to any .flip element built as digits (see header value). */

    function formatMoney(n){
      return n.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2});
    }

    function buildFlipFromString(str){
      const frag = document.createDocumentFragment();
      for(const ch of str){
        const d = document.createElement('span'); d.className='d';
        const s = document.createElement('span'); s.textContent = ch;
        d.appendChild(s); frag.appendChild(d);
      }
      return frag;
    }

    function setFlipValue(el, text){
      // If content differs, rebuild digit spans and animate
      const current = Array.from(el.querySelectorAll('.d > span')).map(s=>s.textContent).join('');
      if(current === text) return;

      // Rebuild content
      el.textContent = '';
      el.appendChild(buildFlipFromString(text));
      el.classList.remove('animate'); void el.offsetWidth; // restart animation
      el.classList.add('animate');
      // remove animate flag after anim completes
      setTimeout(()=>el.classList.remove('animate'), 500);
    }

    // Public API for your app: updateHeaderTotals({copay, hold, fee})
    function updateHeaderTotals({copay, hold, fee}){
      const flipEl = document.getElementById('patientCopay');
      setFlipValue(flipEl, '$' + formatMoney(copay));

      // Update profit text (no flip needed here but easy to add)
      document.getElementById('profit').textContent = '$' + formatMoney(fee);

      // Update totals row numbers too (no flip by default; add if you want)
      document.getElementById('totCopay').textContent = '$' + formatMoney(copay);
      document.getElementById('totHold').textContent = '$' + formatMoney(hold);
      document.getElementById('totFee').textContent  = '$' + formatMoney(fee);
    }

    /* ===== Demo controls (remove in production) ===== */
    const base = {copay:385, hold:224, fee:161};
    document.getElementById('btnReset').addEventListener('click', ()=>updateHeaderTotals(base));
    document.getElementById('btnRandom').addEventListener('click', ()=>{
      const c = 300 + Math.round(Math.random()*200);
      const h = 180 + Math.round(Math.random()*90);
      const f = c - h; // demo math only
      updateHeaderTotals({copay:c, hold:h, fee:f});
    });

    // Initialize with base values
    updateHeaderTotals(base);
  </script>
</body>
</html>
